<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="cert-manager tutorials: Securing Ingress using Venafi Issuers"><meta name=author content="James Munnelly"><link href=https://cert-manager.io/tutorials/venafi/venafi/ rel=canonical><link href=../../acme/pomerium-ingress/ rel=prev><link href=../../zerossl/zerossl/ rel=next><link rel=icon href=../../../assets/favicon.png><meta name=generator content="mkdocs-1.4.3, mkdocs-material-9.1.15"><title>Securing Ingresses with Venafi - cert-manager</title><link rel=stylesheet href=../../../assets/stylesheets/main.26e3688c.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ecc896b0.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#prerequisites class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../.. title=cert-manager class="md-header__button md-logo" aria-label=cert-manager data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> cert-manager </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Securing Ingresses with Venafi </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=查找> <a href=javascript:void(0) class="md-search__icon md-icon" title=分享 aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/cert-manager/cert-manager title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> cert-manager/cert-manager </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> 简介 </a> </li> <li class=md-tabs__item> <a href=../../../installation/ class=md-tabs__link> 安装 </a> </li> <li class=md-tabs__item> <a href=../../../configuration/ class=md-tabs__link> 配置 </a> </li> <li class=md-tabs__item> <a href=../../../usage/ class=md-tabs__link> 使用 </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> 手册 </a> </li> <li class=md-tabs__item> <a href=../../../projects/ class=md-tabs__link> 项目 </a> </li> <li class=md-tabs__item> <a href=../../../troubleshooting/ class=md-tabs__link> 故障排除 </a> </li> <li class=md-tabs__item> <a href=../../../concepts/ class=md-tabs__link> 概念 </a> </li> <li class=md-tabs__item> <a href=../../../reference/ class=md-tabs__link> 参考 </a> </li> <li class=md-tabs__item> <a href=../../../contributing/ class=md-tabs__link> 贡献 </a> </li> <li class=md-tabs__item> <a href=../../../release-notes/ class=md-tabs__link> 发布说明 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=cert-manager class="md-nav__button md-logo" aria-label=cert-manager data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> cert-manager </label> <div class=md-nav__source> <a href=https://github.com/cert-manager/cert-manager title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> cert-manager/cert-manager </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <div class="md-nav__link md-nav__link--index "> <a href=../../..>简介</a> <label for=__nav_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> 简介 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting-started/ class=md-nav__link> 入门 </a> </li> <li class=md-nav__item> <a href=../../../faq/ class=md-nav__link> FAQ </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../installation/ >安装</a> <label for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> 安装 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../installation/supported-releases/ class=md-nav__link> 支持版本 </a> </li> <li class=md-nav__item> <a href=../../../installation/compatibility/ class=md-nav__link> 云兼容性 </a> </li> <li class=md-nav__item> <a href=../../../installation/kubectl/ class=md-nav__link> kubectl apply </a> </li> <li class=md-nav__item> <a href=../../../installation/helm/ class=md-nav__link> Helm </a> </li> <li class=md-nav__item> <a href=../../../installation/operator-lifecycle-manager/ class=md-nav__link> OperatorHub (OLM) </a> </li> <li class=md-nav__item> <a href=../../../installation/other-tools/ class=md-nav__link> 其他工具 </a> </li> <li class=md-nav__item> <a href=../../../installation/verify/ class=md-nav__link> 验证 </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_9> <div class="md-nav__link md-nav__link--index "> <a href=../../../installation/upgrading/ >更新</a> <label for=__nav_2_9> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_9_label aria-expanded=false> <label class=md-nav__title for=__nav_2_9> <span class="md-nav__icon md-icon"></span> 更新 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../installation/upgrading/ingress-class-compatibility/ class=md-nav__link> 关于入类兼容性的说明 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/remove-deprecated-apis/ class=md-nav__link> 迁移废弃的API源 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-1.9-1.10/ class=md-nav__link> v1.9 to v1.10 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-1.8-1.9/ class=md-nav__link> v1.8 to v1.9 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-1.7-1.8/ class=md-nav__link> v1.7 to v1.8 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-1.6-1.7/ class=md-nav__link> v1.6 to v1.7 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-1.5-1.6/ class=md-nav__link> v1.5 to v1.6 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-1.4-1.5/ class=md-nav__link> v1.4 to v1.5 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-1.3-1.4/ class=md-nav__link> v1.3 to v1.4 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-1.2-1.3/ class=md-nav__link> v1.2 to v1.3 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-1.1-1.2/ class=md-nav__link> v1.1 to v1.2 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-1.0-1.1/ class=md-nav__link> v1.0 to v1.1 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-0.16-1.0/ class=md-nav__link> v0.16 to v1.0 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-0.15-0.16/ class=md-nav__link> v0.15 to v0.16 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-0.14-0.15/ class=md-nav__link> v0.14 to v0.15 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-0.13-0.14/ class=md-nav__link> v0.13 to v0.14 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-0.12-0.13/ class=md-nav__link> v0.12 to v0.13 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-0.11-0.12/ class=md-nav__link> v0.11 to v0.12 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-0.10-0.11/ class=md-nav__link> v0.10 to v0.11 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-0.9-0.10/ class=md-nav__link> v0.9 to v0.10 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-0.8-0.9/ class=md-nav__link> v0.8 to v0.9 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-0.7-0.8/ class=md-nav__link> v0.7 to v0.8 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-0.6-0.7/ class=md-nav__link> v0.6 to v0.7 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-0.5-0.6/ class=md-nav__link> v0.5 to v0.6 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-0.4-0.5/ class=md-nav__link> v0.4 to v0.5 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-0.3-0.4/ class=md-nav__link> v0.3 to v0.4 </a> </li> <li class=md-nav__item> <a href=../../../installation/upgrading/upgrading-0.2-0.3/ class=md-nav__link> v0.2 to v0.3 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../installation/uninstall/ class=md-nav__link> 卸载 </a> </li> <li class=md-nav__item> <a href=../../../installation/api-compatibility/ class=md-nav__link> API兼容性 </a> </li> <li class=md-nav__item> <a href=../../../installation/code-signing/ class=md-nav__link> 签名验证 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../configuration/ >配置</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> 配置 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../configuration/acme/ >ACME</a> <label for=__nav_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> ACME </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../configuration/acme/http01/ >HTTP01</a> <label for=__nav_3_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2_2> <span class="md-nav__icon md-icon"></span> HTTP01 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../configuration/acme/http01/externalloadbalancer/ class=md-nav__link> 外部负载均衡器 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../configuration/acme/dns01/ >DNS01</a> <label for=__nav_3_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2_3> <span class="md-nav__icon md-icon"></span> DNS01 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../configuration/acme/dns01/alidns-webhook/ class=md-nav__link> ALIDNS </a> </li> <li class=md-nav__item> <a href=../../../configuration/acme/dns01/cert-manager-alidns-webhook/ class=md-nav__link> CMAW </a> </li> <li class=md-nav__item> <a href=../../../configuration/acme/dns01/acme-dns/ class=md-nav__link> ACMEDNS </a> </li> <li class=md-nav__item> <a href=../../../configuration/acme/dns01/akamai/ class=md-nav__link> Akamai </a> </li> <li class=md-nav__item> <a href=../../../configuration/acme/dns01/azuredns/ class=md-nav__link> AzureDNS </a> </li> <li class=md-nav__item> <a href=../../../configuration/acme/dns01/cloudflare/ class=md-nav__link> Cloudflare </a> </li> <li class=md-nav__item> <a href=../../../configuration/acme/dns01/digitalocean/ class=md-nav__link> DigitalOcean </a> </li> <li class=md-nav__item> <a href=../../../configuration/acme/dns01/google/ class=md-nav__link> Google CloudDNS </a> </li> <li class=md-nav__item> <a href=../../../configuration/acme/dns01/rfc2136/ class=md-nav__link> RFC-2136 </a> </li> <li class=md-nav__item> <a href=../../../configuration/acme/dns01/route53/ class=md-nav__link> Route53 </a> </li> <li class=md-nav__item> <a href=../../../configuration/acme/dns01/webhook/ class=md-nav__link> Webhook </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../configuration/selfsigned/ class=md-nav__link> SelfSigned </a> </li> <li class=md-nav__item> <a href=../../../configuration/ca/ class=md-nav__link> CA </a> </li> <li class=md-nav__item> <a href=../../../configuration/vault/ class=md-nav__link> Vault </a> </li> <li class=md-nav__item> <a href=../../../configuration/venafi/ class=md-nav__link> Venafi </a> </li> <li class=md-nav__item> <a href=../../../configuration/external/ class=md-nav__link> External </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../usage/ >使用</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> 使用 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../usage/certificate/ class=md-nav__link> 证书源 </a> </li> <li class=md-nav__item> <a href=../../../usage/ingress/ class=md-nav__link> 保护入口源 </a> </li> <li class=md-nav__item> <a href=../../../usage/gateway/ class=md-nav__link> 保护网关源 </a> </li> <li class=md-nav__item> <a href=../../../usage/prometheus-metrics/ class=md-nav__link> Prometheus Metrics </a> </li> <li class=md-nav__item> <a href=../../../usage/istio/ class=md-nav__link> 保护Istio服务网格 </a> </li> <li class=md-nav__item> <a href=../../../usage/csi/ class=md-nav__link> CSI驱动 </a> </li> <li class=md-nav__item> <a href=../../../usage/kube-csr/ class=md-nav__link> Kubernetes CertificateSigningRequests </a> </li> <li class=md-nav__item> <a href=../../../usage/approver-policy/ class=md-nav__link> cert-manager 证书的策略 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../ >手册</a> <label for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> 手册 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../kubenetes-aliyun-https/ class=md-nav__link> 阿里云K8s部署 </a> </li> <li class=md-nav__item> <a href=../../acme/http-validation/ class=md-nav__link> HTTP 验证 </a> </li> <li class=md-nav__item> <a href=../../acme/dns-validation/ class=md-nav__link> DNS 验证 </a> </li> <li class=md-nav__item> <a href=../../acme/nginx-ingress/ class=md-nav__link> NGINX-ingress </a> </li> <li class=md-nav__item> <a href=../../backup/ class=md-nav__link> 备份恢复源 </a> </li> <li class=md-nav__item> <a href=../../syncing-secrets-across-namespaces/ class=md-nav__link> 跨命名空间同步秘密 </a> </li> <li class=md-nav__item> <a href=../../istio-csr/istio-csr/ class=md-nav__link> 保护istio Service Mesh </a> </li> <li class=md-nav__item> <a href=../../getting-started-with-cert-manager-on-google-kubernetes-engine-using-lets-encrypt-for-ingress-ssl/ class=md-nav__link> GKE+Ingress+Let's Encrypt </a> </li> <li class=md-nav__item> <a href=../../acme/migrating-from-kube-lego/ class=md-nav__link> 迁移Kube-LEGO </a> </li> <li class=md-nav__item> <a href=../../acme/pomerium-ingress/ class=md-nav__link> Pomerium Ingress </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> EKS+Ingress+Venafi <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> EKS+Ingress+Venafi </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=#create-an-eks-cluster class=md-nav__link> Create an EKS cluster </a> </li> <li class=md-nav__item> <a href=#installing-cert-manager class=md-nav__link> Installing cert-manager </a> </li> <li class=md-nav__item> <a href=#installing-ingress-nginx class=md-nav__link> Installing ingress-nginx </a> </li> <li class=md-nav__item> <a href=#configure-your-dns-records class=md-nav__link> Configure your DNS records </a> </li> <li class=md-nav__item> <a href=#deploying-a-demo-application class=md-nav__link> Deploying a demo application </a> </li> <li class=md-nav__item> <a href=#creating-a-venafi-issuer-resource class=md-nav__link> Creating a Venafi Issuer resource </a> <nav class=md-nav aria-label="Creating a Venafi Issuer resource"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#venafi-tpp class=md-nav__link> Venafi TPP </a> </li> <li class=md-nav__item> <a href=#venafi-cloud class=md-nav__link> Venafi Cloud </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#request-a-certificate class=md-nav__link> Request a Certificate </a> </li> <li class=md-nav__item> <a href=#exposing-and-securing-your-application class=md-nav__link> Exposing and securing your application </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../zerossl/zerossl/ class=md-nav__link> 用ZeroSSL保护入口 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../projects/ >项目</a> <label for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> 项目 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../projects/istio-csr/ class=md-nav__link> istio-csr </a> </li> <li class=md-nav__item> <a href=../../../projects/csi-driver/ class=md-nav__link> csi-driver </a> </li> <li class=md-nav__item> <a href=../../../projects/csi-driver-spiffe/ class=md-nav__link> csi-driver-spiffe </a> </li> <li class=md-nav__item> <a href=../../../projects/approver-policy/ class=md-nav__link> approver-policy </a> </li> <li class=md-nav__item> <a href=../../../projects/trust-manager/ class=md-nav__link> trust-manager </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <div class="md-nav__link md-nav__link--index "> <a href=../../../troubleshooting/ >故障排除</a> <label for=__nav_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> 故障排除 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../troubleshooting/acme/ class=md-nav__link> ACME/Let's Encrypt 证书故障处理 </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/webhook/ class=md-nav__link> webhook故障处理 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <div class="md-nav__link md-nav__link--index "> <a href=../../../concepts/ >概念</a> <label for=__nav_8> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> 概念 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../concepts/issuer/ class=md-nav__link> Issuer(颁发者) </a> </li> <li class=md-nav__item> <a href=../../../concepts/certificate/ class=md-nav__link> Certificate(证书) </a> </li> <li class=md-nav__item> <a href=../../../concepts/certificaterequest/ class=md-nav__link> CertificateRequest(证书请求) </a> </li> <li class=md-nav__item> <a href=../../../concepts/acme-orders-challenges/ class=md-nav__link> ACME Orders(命令)和Challenges(挑战) </a> </li> <li class=md-nav__item> <a href=../../../concepts/webhook/ class=md-nav__link> Webhook(Web钩子) </a> </li> <li class=md-nav__item> <a href=../../../concepts/ca-injector/ class=md-nav__link> CA Injector(CA 注射器) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <div class="md-nav__link md-nav__link--index "> <a href=../../../reference/ >参考</a> <label for=__nav_9> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> 参考 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/cmctl/ class=md-nav__link> 命令行工具 (cmctl) </a> </li> <li class=md-nav__item> <a href=../../../reference/tls-terminology/ class=md-nav__link> TLS 术语 </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../cli/ >组件/ Docker映像</a> <label for=__nav_9_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_4_label aria-expanded=false> <label class=md-nav__title for=__nav_9_4> <span class="md-nav__icon md-icon"></span> 组件/ Docker映像 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cli/acmesolver/ class=md-nav__link> acmesolver </a> </li> <li class=md-nav__item> <a href=../../../cli/cainjector/ class=md-nav__link> cainjector </a> </li> <li class=md-nav__item> <a href=../../../cli/cmctl/ class=md-nav__link> cmctl </a> </li> <li class=md-nav__item> <a href=../../../cli/controller/ class=md-nav__link> controller </a> </li> <li class=md-nav__item> <a href=../../../cli/webhook/ class=md-nav__link> webhook </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../reference/api-docs/ class=md-nav__link> API 参考 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10> <div class="md-nav__link md-nav__link--index "> <a href=../../../contributing/ >贡献</a> <label for=__nav_10> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_10_label aria-expanded=false> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> 贡献 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../contributing/policy/ class=md-nav__link> 功能政策 </a> </li> <li class=md-nav__item> <a href=../../../contributing/building/ class=md-nav__link> 构建 cert-manager </a> </li> <li class=md-nav__item> <a href=../../../contributing/contributing-flow/ class=md-nav__link> 流的贡献 </a> </li> <li class=md-nav__item> <a href=../../../contributing/crds/ class=md-nav__link> CRDs </a> </li> <li class=md-nav__item> <a href=../../../contributing/dns-providers/ class=md-nav__link> DNS Providers </a> </li> <li class=md-nav__item> <a href=../../../contributing/e2e/ class=md-nav__link> 运行端到端测试 </a> </li> <li class=md-nav__item> <a href=../../../contributing/external-issuers/ class=md-nav__link> 实施外部发行人 </a> </li> <li class=md-nav__item> <a href=../../../contributing/sign-off/ class=md-nav__link> DCO签署 </a> </li> <li class=md-nav__item> <a href=../../../contributing/release-process/ class=md-nav__link> 发布过程 </a> </li> <li class=md-nav__item> <a href=../../../contributing/kind/ class=md-nav__link> 与人为善 </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10_12> <div class="md-nav__link md-nav__link--index "> <a href=../../../contributing/google-season-of-docs/ >谷歌文档季</a> <label for=__nav_10_12> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_10_12_label aria-expanded=false> <label class=md-nav__title for=__nav_10_12> <span class="md-nav__icon md-icon"></span> 谷歌文档季 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10_12_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../contributing/google-season-of-docs/2022/ >2022</a> <label for=__nav_10_12_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_10_12_2_label aria-expanded=false> <label class=md-nav__title for=__nav_10_12_2> <span class="md-nav__icon md-icon"></span> 2022 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../contributing/google-season-of-docs/2022/improve-navigation-and-structure/ class=md-nav__link> 改进cert-manager网站的导航和结构 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../contributing/security/ class=md-nav__link> 报告安全问题 </a> </li> <li class=md-nav__item> <a href=../../../contributing/coding-conventions/ class=md-nav__link> 代码编写约定 </a> </li> <li class=md-nav__item> <a href=../../../contributing/third-party-code-donation/ class=md-nav__link> 第三方代码捐赠 </a> </li> <li class=md-nav__item> <a href=../../../contributing/signing-keys/ class=md-nav__link> 签名密钥 </a> </li> <li class=md-nav__item> <a href=../../../contributing/importing/ class=md-nav__link> 在Go中导入证书管理器 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_11> <div class="md-nav__link md-nav__link--index "> <a href=../../../release-notes/ >发布说明</a> <label for=__nav_11> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_11_label aria-expanded=false> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> 发布说明 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../release-notes/release-notes-1.10/ class=md-nav__link> v1.10 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-1.9/ class=md-nav__link> v1.9 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-1.8/ class=md-nav__link> v1.8 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-1.7/ class=md-nav__link> v1.7 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-1.6/ class=md-nav__link> v1.6 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-1.5/ class=md-nav__link> v1.5 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-1.4/ class=md-nav__link> v1.4 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-1.3/ class=md-nav__link> v1.3 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-1.2/ class=md-nav__link> v1.2 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-1.1/ class=md-nav__link> v1.1 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-1.0/ class=md-nav__link> v1.0 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-0.16/ class=md-nav__link> v0.16 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-0.15/ class=md-nav__link> v0.15 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-0.14/ class=md-nav__link> v0.14 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-0.13/ class=md-nav__link> v0.13 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-0.12/ class=md-nav__link> v0.12 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-0.11/ class=md-nav__link> v0.11 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-0.10/ class=md-nav__link> v0.10 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-0.9/ class=md-nav__link> v0.9 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-0.8/ class=md-nav__link> v0.8 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-0.7/ class=md-nav__link> v0.7 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-0.6/ class=md-nav__link> v0.6 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-0.5/ class=md-nav__link> v0.5 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-0.4/ class=md-nav__link> v0.4 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-0.3/ class=md-nav__link> v0.3 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-0.2/ class=md-nav__link> v0.2 </a> </li> <li class=md-nav__item> <a href=../../../release-notes/release-notes-0.1/ class=md-nav__link> v0.1 </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=#create-an-eks-cluster class=md-nav__link> Create an EKS cluster </a> </li> <li class=md-nav__item> <a href=#installing-cert-manager class=md-nav__link> Installing cert-manager </a> </li> <li class=md-nav__item> <a href=#installing-ingress-nginx class=md-nav__link> Installing ingress-nginx </a> </li> <li class=md-nav__item> <a href=#configure-your-dns-records class=md-nav__link> Configure your DNS records </a> </li> <li class=md-nav__item> <a href=#deploying-a-demo-application class=md-nav__link> Deploying a demo application </a> </li> <li class=md-nav__item> <a href=#creating-a-venafi-issuer-resource class=md-nav__link> Creating a Venafi Issuer resource </a> <nav class=md-nav aria-label="Creating a Venafi Issuer resource"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#venafi-tpp class=md-nav__link> Venafi TPP </a> </li> <li class=md-nav__item> <a href=#venafi-cloud class=md-nav__link> Venafi Cloud </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#request-a-certificate class=md-nav__link> Request a Certificate </a> </li> <li class=md-nav__item> <a href=#exposing-and-securing-your-application class=md-nav__link> Exposing and securing your application </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>EKS+Ingress+Venafi</h1> <p>This guide walks you through how to secure a Kubernetes <a href=https://kubernetes.io/docs/concepts/services-networking/ingress/ ><code>Ingress</code></a> resource using the Venafi Issuer type.</p> <p>Whilst stepping through, you will learn how to:</p> <ul> <li>Create an EKS cluster using <a href=https://github.com/weaveworks/eksctl><code>eksctl</code></a></li> <li>Install cert-manager into the EKS cluster</li> <li>Deploy <a href=https://github.com/kubernetes/ingress-nginx><code>nginx-ingress</code></a> to expose applications running in the cluster</li> <li>Configure a Venafi Cloud issuer</li> <li>Configure cert-manager to secure your application traffic</li> </ul> <p>While this guide focuses on EKS as a Kubernetes provisioner and Venafi as a Certificate issuer, the steps here should be generally re-usable for other Issuer types.</p> <h2 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">&para;</a></h2> <ul> <li>An AWS account</li> <li><code>kubectl</code> installed</li> <li>Access to a publicly registered DNS zone</li> <li>A Venafi Cloud account and API credentials</li> </ul> <h2 id=create-an-eks-cluster>Create an EKS cluster<a class=headerlink href=#create-an-eks-cluster title="Permanent link">&para;</a></h2> <p>If you already have a running EKS cluster you can skip this step and move onto deploying cert-manager.</p> <p><a href=https://eksctl.io/introduction/installation/ ><code>eksctl</code></a> is a tool that makes it easier to deploy and manage an EKS cluster.</p> <p>Installation instructions for various platforms can be found in the <a href=https://eksctl.io/introduction/installation/ ><code>eksctl</code> installation instructions</a>.</p> <p>Once installed, you can create a basic cluster by running:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>$ eksctl create cluster
</code></pre></div> <p>This process may take up to 20 minutes to complete. Complete instructions on using <code>eksctl</code> can be found in the <a href=https://eksctl.io/usage/creating-and-managing-clusters/ ><code>eksctl</code> usage section</a>.</p> <p>Once your cluster has been created, you should verify that your cluster is running correctly by running the following command:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>$ kubectl get pods --all-namespaces
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>NAME                      READY   STATUS    RESTARTS   AGE
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>aws-node-8xpkp            1/1     Running   0          115s
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>aws-node-tflxs            1/1     Running   0          118s
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>coredns-694d9447b-66vlp   1/1     Running   0          23s
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>coredns-694d9447b-w5bg8   1/1     Running   0          23s
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>kube-proxy-4dvpj          1/1     Running   0          115s
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>kube-proxy-tpvht          1/1     Running   0          118s
</code></pre></div> <p>You should see output similar to the above, with all pods in a Running state.</p> <h2 id=installing-cert-manager>Installing cert-manager<a class=headerlink href=#installing-cert-manager title="Permanent link">&para;</a></h2> <p>There are no special requirements to note when installing cert-manager on EKS, so the regular <a href=../../../installation/ >running on Kubernetes</a> guides can be used to install cert-manager.</p> <p>Please walk through the installation guide and return to this step once you have validated cert-manager is deployed correctly.</p> <h2 id=installing-ingress-nginx>Installing <code>ingress-nginx</code><a class=headerlink href=#installing-ingress-nginx title="Permanent link">&para;</a></h2> <p>A <a href=https://eksctl.io/usage/creating-and-managing-clusters/ >Kubernetes ingress controller</a> is designed to be the access point for HTTP and HTTPS traffic to the software running within your cluster. The <a href=https://github.com/kubernetes/ingress-nginx><code>ingress-nginx</code></a> controller does this by providing an HTTP proxy service supported by your cloud provider's load balancer (in this case, a <a href=https://docs.aws.amazon.com/elasticloadbalancing/latest/network/introduction.html>Network Load Balancer (NLB)</a>.</p> <p>You can get more details about <code>ingress-nginx</code> and how it works from the <a href=https://kubernetes.github.io/ingress-nginx/ >documentation for <code>ingress-nginx</code></a>.</p> <p>To deploy <code>ingress-nginx</code> using an ELB to expose the service, run the following:</p> <p>Deploy the AWS specific prerequisite manifest <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>$<span class=w> </span>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.4.0/deploy/static/provider/aws/deploy.yaml
</code></pre></div></p> <p>Deploy the 'generic' <code>ingress-nginx</code> manifest <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>$<span class=w> </span>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/aws/deploy.yaml
</code></pre></div></p> <p>You may have to wait up to 5 minutes for all the required components in your cluster and AWS account to become ready.</p> <p>You can run the following command to determine the address that Amazon has assigned to your NLB:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>$<span class=w> </span>kubectl<span class=w> </span>get<span class=w> </span>service<span class=w> </span>-n<span class=w> </span>ingress-nginx
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>NAME<span class=w>            </span>TYPE<span class=w>           </span>CLUSTER-IP<span class=w>      </span>EXTERNAL-IP<span class=w>                                                                     </span>PORT<span class=o>(</span>S<span class=o>)</span><span class=w>                      </span>AGE
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>ingress-nginx<span class=w>   </span>LoadBalancer<span class=w>   </span><span class=m>10</span>.100.52.175<span class=w>   </span>a8c2870a5a8a311e9a9a10a2e7af57d7-6c2ec8ede48726ab.elb.eu-west-1.amazonaws.com<span class=w>   </span><span class=m>80</span>:31649/TCP,443:30567/TCP<span class=w>   </span>4m10s
</code></pre></div> <p>The <em>EXTERNAL-IP</em> field may say <code>&lt;pending&gt;</code> for a while. This indicates the NLB is still being created. Retry the command until an <em>EXTERNAL-IP</em> has been provisioned.</p> <p>Once the <em>EXTERNAL-IP</em> is available, you should run the following command to verify that traffic is being correctly routed to <code>ingress-nginx</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>$ curl http://a8c2870a5a8a311e9a9a10a2e7af57d7-6c2ec8ede48726ab.elb.eu-west-1.amazonaws.com/
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>&lt;html&gt;
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>&lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>&lt;body&gt;
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>&lt;center&gt;&lt;h1&gt;404 Not Found&lt;/h1&gt;&lt;/center&gt;
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>&lt;hr&gt;&lt;center&gt;openresty/1.15.8.1&lt;/center&gt;
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>&lt;/body&gt;
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>&lt;/html&gt;
</code></pre></div> <p>Whilst the above message would normally indicate an error (the page not being found), in this instance it indicates that traffic is being correctly routed to the <code>ingress-nginx</code> service.</p> <blockquote> <p>Note: Although the AWS Application Load Balancer (ALB) is a modern load balancer offered by AWS that can can be provisioned from within EKS, at the time of writing, the <a href="https://github.com/kubernetes-sigs/aws-alb-ingress-controller>"><code>alb-ingress-controller</code></a> is only capable of serving sites using certificates stored in AWS Certificate Manager (ACM). Version 1.15 of Kubernetes should address multiple bug fixes for this controller and allow for TLS termination support.</p> </blockquote> <h2 id=configure-your-dns-records>Configure your DNS records<a class=headerlink href=#configure-your-dns-records title="Permanent link">&para;</a></h2> <p>Now that our NLB has been provisioned, we should point our application's DNS records at the NLBs address.</p> <p>Go into your DNS provider's console and set a CNAME record pointing to your NLB.</p> <p>For the purposes of demonstration, we will assume in this guide you have created the following DNS entry:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>example.com CNAME a8c2870a5a8a311e9a9a10a2e7af57d7-6c2ec8ede48726ab.elb.eu-west-1.amazonaws.com
</code></pre></div> <p>As you progress through the rest of this tutorial, please replace <code>example.com</code> with your own registered domain.</p> <h2 id=deploying-a-demo-application>Deploying a demo application<a class=headerlink href=#deploying-a-demo-application title="Permanent link">&para;</a></h2> <p>For the purposes of this demo, we provide an example deployment which is a simple "hello world" website.</p> <p>First, create a new namespace that will contain your application:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>$<span class=w> </span>kubectl<span class=w> </span>create<span class=w> </span>namespace<span class=w> </span>demo
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>namespace/demo<span class=w> </span>created
</code></pre></div> <p>Save the following YAML into a file named <code>demo-deployment.yaml</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">hello-kubernetes</span>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">demo</span>
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span>
<a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=w>  </span><span class=nt>ports</span><span class=p>:</span>
<a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=w>    </span><span class=nt>targetPort</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=w>  </span><span class=nt>selector</span><span class=p>:</span>
<a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">hello-kubernetes</span>
<a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=nn>---</span>
<a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">hello-kubernetes</span>
<a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">demo</span>
<a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id=__codelineno-8-21 name=__codelineno-8-21 href=#__codelineno-8-21></a><span class=w>  </span><span class=nt>selector</span><span class=p>:</span>
<a id=__codelineno-8-22 name=__codelineno-8-22 href=#__codelineno-8-22></a><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span>
<a id=__codelineno-8-23 name=__codelineno-8-23 href=#__codelineno-8-23></a><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">hello-kubernetes</span>
<a id=__codelineno-8-24 name=__codelineno-8-24 href=#__codelineno-8-24></a><span class=w>  </span><span class=nt>template</span><span class=p>:</span>
<a id=__codelineno-8-25 name=__codelineno-8-25 href=#__codelineno-8-25></a><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-8-26 name=__codelineno-8-26 href=#__codelineno-8-26></a><span class=w>      </span><span class=nt>labels</span><span class=p>:</span>
<a id=__codelineno-8-27 name=__codelineno-8-27 href=#__codelineno-8-27></a><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">hello-kubernetes</span>
<a id=__codelineno-8-28 name=__codelineno-8-28 href=#__codelineno-8-28></a><span class=w>    </span><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-8-29 name=__codelineno-8-29 href=#__codelineno-8-29></a><span class=w>      </span><span class=nt>containers</span><span class=p>:</span>
<a id=__codelineno-8-30 name=__codelineno-8-30 href=#__codelineno-8-30></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">hello-kubernetes</span>
<a id=__codelineno-8-31 name=__codelineno-8-31 href=#__codelineno-8-31></a><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">paulbouwer/hello-kubernetes:1.5</span>
<a id=__codelineno-8-32 name=__codelineno-8-32 href=#__codelineno-8-32></a><span class=w>        </span><span class=nt>resources</span><span class=p>:</span>
<a id=__codelineno-8-33 name=__codelineno-8-33 href=#__codelineno-8-33></a><span class=w>          </span><span class=nt>requests</span><span class=p>:</span>
<a id=__codelineno-8-34 name=__codelineno-8-34 href=#__codelineno-8-34></a><span class=w>            </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100m</span>
<a id=__codelineno-8-35 name=__codelineno-8-35 href=#__codelineno-8-35></a><span class=w>            </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100Mi</span>
<a id=__codelineno-8-36 name=__codelineno-8-36 href=#__codelineno-8-36></a><span class=w>        </span><span class=nt>ports</span><span class=p>:</span>
<a id=__codelineno-8-37 name=__codelineno-8-37 href=#__codelineno-8-37></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div> <p>Then run:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-n<span class=w> </span>demo<span class=w> </span>-f<span class=w> </span>demo-deployment.yaml
</code></pre></div> <p>Note that the Service resource we deploy is of type <code>ClusterIP</code> and not <code>LoadBalancer</code>, as we will expose and secure traffic for this service using <code>ingress-nginx</code> that we deployed earlier.</p> <p>You should be able to see two Pods and one Service in the <code>demo</code> namespace:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>kubectl<span class=w> </span>get<span class=w> </span>po,svc<span class=w> </span>-n<span class=w> </span>demo
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>NAME<span class=w>                                </span>READY<span class=w>   </span>STATUS<span class=w>    </span>RESTARTS<span class=w>   </span>AGE
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>hello-kubernetes-66d45d6dff-m2lnr<span class=w>   </span><span class=m>1</span>/1<span class=w>     </span>Running<span class=w>   </span><span class=m>0</span><span class=w>          </span>7s
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>hello-kubernetes-66d45d6dff-qt2kb<span class=w>   </span><span class=m>1</span>/1<span class=w>     </span>Running<span class=w>   </span><span class=m>0</span><span class=w>          </span>7s
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>NAME<span class=w>                       </span>TYPE<span class=w>        </span>CLUSTER-IP<span class=w>      </span>EXTERNAL-IP<span class=w>   </span>PORT<span class=o>(</span>S<span class=o>)</span><span class=w>   </span>AGE
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>service/hello-kubernetes<span class=w>   </span>ClusterIP<span class=w>   </span><span class=m>10</span>.100.164.58<span class=w>   </span>&lt;none&gt;<span class=w>        </span><span class=m>80</span>/TCP<span class=w>    </span>7s
</code></pre></div> <p>Note that we have not yet exposed this application to be accessible over the internet. We will expose the demo application to the internet in later steps.</p> <h2 id=creating-a-venafi-issuer-resource>Creating a Venafi Issuer resource<a class=headerlink href=#creating-a-venafi-issuer-resource title="Permanent link">&para;</a></h2> <p>cert-manager supports both Venafi TPP and Venafi Cloud.</p> <p>Please only follow one of the below sections according to where you want to retrieve your Certificates from.</p> <h3 id=venafi-tpp>Venafi TPP<a class=headerlink href=#venafi-tpp title="Permanent link">&para;</a></h3> <p>Assuming you already have a Venafi TPP server set up properly, you can create a Venafi Issuer resource that can be used to issue certificates.</p> <p>To do this, you need to make sure you have your TPP <em>username</em> and <em>password</em>.</p> <p>In order for cert-manager to be able to authenticate with your Venafi TPP server and set up an Issuer resource, you'll need to create a Kubernetes Secret containing your username and password:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>$<span class=w> </span>kubectl<span class=w> </span>create<span class=w> </span>secret<span class=w> </span>generic<span class=w> </span><span class=se>\</span>
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>       </span>venafi-tpp-secret<span class=w> </span><span class=se>\</span>
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>       </span>--namespace<span class=o>=</span>demo<span class=w> </span><span class=se>\</span>
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>       </span>--from-literal<span class=o>=</span><span class=nv>username</span><span class=o>=</span><span class=s1>&#39;YOUR_TPP_USERNAME_HERE&#39;</span><span class=w> </span><span class=se>\</span>
<a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=w>       </span>--from-literal<span class=o>=</span><span class=nv>password</span><span class=o>=</span><span class=s1>&#39;YOUR_TPP_PASSWORD_HERE&#39;</span>
</code></pre></div> <p>We must then create a Venafi Issuer resource, which represents a certificate authority within Kubernetes.</p> <p>Save the following YAML into a file named <code>venafi-issuer.yaml</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cert-manager.io/v1</span>
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Issuer</span>
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">venafi-issuer</span>
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">demo</span>
<a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=w>  </span><span class=nt>venafi</span><span class=p>:</span>
<a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=w>    </span><span class=nt>zone</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Default&quot;</span><span class=w> </span><span class=c1># Set this to the Venafi policy zone you want to use</span>
<a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=w>    </span><span class=nt>tpp</span><span class=p>:</span>
<a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a><span class=w>      </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://venafi-tpp.example.com/vedsdk</span><span class=w> </span><span class=c1># Change this to the URL of your TPP instance</span>
<a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a><span class=w>      </span><span class=nt>caBundle</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;base64 encoded string of caBundle PEM file, or empty to use system root CAs&gt;</span>
<a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a><span class=w>      </span><span class=nt>credentialsRef</span><span class=p>:</span>
<a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">venafi-tpp-secret</span>
</code></pre></div> <p>Then run:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>$<span class=w> </span>kubectl<span class=w> </span>apply<span class=w> </span>-n<span class=w> </span>demo<span class=w> </span>-f<span class=w> </span>venafi-issuer.yaml
</code></pre></div> <p>When you run the following command, you should see that the Status stanza of the output shows that the Issuer is Ready (i.e. has successfully validated itself with the Venafi TPP server).</p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>$<span class=w> </span>kubectl<span class=w> </span>describe<span class=w> </span>issuer<span class=w> </span>-n<span class=w> </span>demo<span class=w> </span>venafi-issuer
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w> </span>Status:
<a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>   </span>Conditions:
<a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>     </span>Last<span class=w> </span>Transition<span class=w> </span>Time:<span class=w>  </span><span class=m>2019</span>-07-17T15:46:00Z
<a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=w>     </span>Message:<span class=w>               </span>Venafi<span class=w> </span>issuer<span class=w> </span>started
<a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>     </span>Reason:<span class=w>                </span>Venafi<span class=w> </span>issuer<span class=w> </span>started
<a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>     </span>Status:<span class=w>                </span>True
<a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=w>     </span>Type:<span class=w>                  </span>Ready
<a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=w> </span>Events:
<a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=w>   </span>Type<span class=w>    </span>Reason<span class=w>  </span>Age<span class=w>   </span>From<span class=w>          </span>Message
<a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a><span class=w>   </span>----<span class=w>    </span>------<span class=w>  </span>----<span class=w>  </span>----<span class=w>          </span>-------
<a id=__codelineno-14-13 name=__codelineno-14-13 href=#__codelineno-14-13></a><span class=w>   </span>Normal<span class=w>  </span>Ready<span class=w>   </span>14s<span class=w>   </span>cert-manager<span class=w>  </span>Verified<span class=w> </span>issuer<span class=w> </span>with<span class=w> </span>Venafi<span class=w> </span>server
</code></pre></div> <h3 id=venafi-cloud>Venafi Cloud<a class=headerlink href=#venafi-cloud title="Permanent link">&para;</a></h3> <p>You can sign up for a Venafi Cloud account by visiting the <a href=https://www.venafi.com/cloud>enrollment page</a>.</p> <p>Once registered, you should fetch your API key by clicking your name in the top right of the control panel interface.</p> <p>In order for cert-manager to be able to authenticate with your Venafi Cloud account and set up an Issuer resource, you'll need to create a Kubernetes Secret containing your API key:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>$<span class=w> </span>kubectl<span class=w> </span>create<span class=w> </span>secret<span class=w> </span>generic<span class=w> </span><span class=se>\</span>
<a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>    </span>venafi-cloud-secret<span class=w> </span><span class=se>\</span>
<a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>    </span>--namespace<span class=o>=</span>demo<span class=w> </span><span class=se>\</span>
<a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>    </span>--from-literal<span class=o>=</span><span class=nv>apikey</span><span class=o>=</span>&lt;API_KEY&gt;
</code></pre></div> <p>We must then create a Venafi Issuer resource, which represents a certificate authority within Kubernetes.</p> <p>Save the following YAML into a file named <code>venafi-issuer.yaml</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cert-manager.io/v1</span>
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Issuer</span>
<a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">venafi-issuer</span>
<a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">demo</span>
<a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=w>  </span><span class=nt>venafi</span><span class=p>:</span>
<a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=w>    </span><span class=nt>zone</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Default&quot;</span><span class=w> </span><span class=c1># Set this to the Venafi policy zone you want to use</span>
<a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=w>    </span><span class=nt>cloud</span><span class=p>:</span>
<a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=w>      </span><span class=nt>apiTokenSecretRef</span><span class=p>:</span>
<a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">venafi-cloud-secret</span>
<a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a><span class=w>        </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">apikey</span>
</code></pre></div> <p>Then run:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>$<span class=w> </span>kubectl<span class=w> </span>apply<span class=w> </span>-n<span class=w> </span>demo<span class=w> </span>-f<span class=w> </span>venafi-issuer.yaml
</code></pre></div> <p>When you run the following command, you should see that the Status stanza of the output shows that the Issuer is Ready (i.e. has successfully validated itself with the Venafi Cloud service).</p> <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>$<span class=w> </span>kubectl<span class=w> </span>describe<span class=w> </span>issuer<span class=w> </span>-n<span class=w> </span>demo<span class=w> </span>venafi-issuer
<a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>...
<a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>Status:
<a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=w>  </span>Conditions:
<a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=w>    </span>Last<span class=w> </span>Transition<span class=w> </span>Time:<span class=w>  </span><span class=m>2019</span>-07-17T15:46:00Z
<a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=w>    </span>Message:<span class=w>               </span>Venafi<span class=w> </span>issuer<span class=w> </span>started
<a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=w>    </span>Reason:<span class=w>                </span>Venafi<span class=w> </span>issuer<span class=w> </span>started
<a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=w>    </span>Status:<span class=w>                </span>True
<a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a><span class=w>    </span>Type:<span class=w>                  </span>Ready
<a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a>Events:
<a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a><span class=w>  </span>Type<span class=w>    </span>Reason<span class=w>  </span>Age<span class=w>   </span>From<span class=w>          </span>Message
<a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a><span class=w>  </span>----<span class=w>    </span>------<span class=w>  </span>----<span class=w>  </span>----<span class=w>          </span>-------
<a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a><span class=w>  </span>Normal<span class=w>  </span>Ready<span class=w>   </span>14s<span class=w>   </span>cert-manager<span class=w>  </span>Verified<span class=w> </span>issuer<span class=w> </span>with<span class=w> </span>Venafi<span class=w> </span>server
</code></pre></div> <h2 id=request-a-certificate>Request a Certificate<a class=headerlink href=#request-a-certificate title="Permanent link">&para;</a></h2> <p>Now that the Issuer is configured and we have confirmed it has been set up correctly, we can begin requesting certificates which can be used by Kubernetes applications.</p> <p>Full information on how to specify and request Certificate resources can be found in the <a href=../../../usage/certificate/ >Issuing certificates</a> guide.</p> <p>For now, we will create a basic X.509 Certificate that is valid for our domain, <code>example.com</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cert-manager.io/v1</span>
<a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Certificate</span>
<a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">example-com-tls</span>
<a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">demo</span>
<a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=w>  </span><span class=nt>secretName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">example-com-tls</span>
<a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a><span class=w>  </span><span class=nt>dnsNames</span><span class=p>:</span>
<a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span>
<a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a><span class=w>  </span><span class=nt>commonName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span>
<a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a><span class=w>  </span><span class=nt>issuerRef</span><span class=p>:</span>
<a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">venafi-issuer</span>
</code></pre></div> <p>Save this YAML into a file named <code>example-com-tls.yaml</code> and run:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>$<span class=w> </span>kubectl<span class=w> </span>apply<span class=w> </span>-n<span class=w> </span>demo<span class=w> </span>-f<span class=w> </span>example-com-tls.yaml
</code></pre></div> <p>As long as you've ensured that the zone of your Venafi Cloud account (in our example, we use the "Default" zone) has been configured with a CA or contains a custom certificate, cert-manager can now take steps to populate the <code>example-com-tls</code> Secret with a certificate. It does this by identifying itself with Venafi Cloud using the API key, then requesting a certificate to match the specifications of the Certificate resource that we've created.</p> <p>You can run <code>kubectl describe</code> to check the progress of your Certificate:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a>$<span class=w> </span>kubectl<span class=w> </span>describe<span class=w> </span>certificate<span class=w> </span>-n<span class=w> </span>demo<span class=w> </span>example-com-tls
<a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>...
<a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a>Status:
<a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=w>  </span>Conditions:
<a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w>    </span>Last<span class=w> </span>Transition<span class=w> </span>Time:<span class=w>  </span><span class=m>2019</span>-07-17T17:43:01Z
<a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=w>    </span>Message:<span class=w>               </span>Certificate<span class=w> </span>is<span class=w> </span>up<span class=w> </span>to<span class=w> </span>date<span class=w> </span>and<span class=w> </span>has<span class=w> </span>not<span class=w> </span>expired
<a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=w>    </span>Reason:<span class=w>                </span>Ready
<a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=w>    </span>Status:<span class=w>                </span>True
<a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=w>    </span>Type:<span class=w>                  </span>Ready
<a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a><span class=w>  </span>Not<span class=w> </span>After:<span class=w>               </span><span class=m>2019</span>-10-15T12:00:00Z
<a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a>Events:
<a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a><span class=w>  </span>Type<span class=w>    </span>Reason<span class=w>       </span>Age<span class=w>   </span>From<span class=w>          </span>Message
<a id=__codelineno-21-13 name=__codelineno-21-13 href=#__codelineno-21-13></a><span class=w>  </span>----<span class=w>    </span>------<span class=w>       </span>----<span class=w>  </span>----<span class=w>          </span>-------
<a id=__codelineno-21-14 name=__codelineno-21-14 href=#__codelineno-21-14></a><span class=w>  </span>Normal<span class=w>  </span>Issuing<span class=w>      </span>33s<span class=w>   </span>cert-manager<span class=w>  </span>Requesting<span class=w> </span>new<span class=w> </span>certificate...
<a id=__codelineno-21-15 name=__codelineno-21-15 href=#__codelineno-21-15></a><span class=w>  </span>Normal<span class=w>  </span>GenerateKey<span class=w>  </span>33s<span class=w>   </span>cert-manager<span class=w>  </span>Generated<span class=w> </span>new<span class=w> </span>private<span class=w> </span>key
<a id=__codelineno-21-16 name=__codelineno-21-16 href=#__codelineno-21-16></a><span class=w>  </span>Normal<span class=w>  </span>Validate<span class=w>     </span>33s<span class=w>   </span>cert-manager<span class=w>  </span>Validated<span class=w> </span>certificate<span class=w> </span>request<span class=w> </span>against<span class=w> </span>Venafi<span class=w> </span>zone<span class=w> </span>policy
<a id=__codelineno-21-17 name=__codelineno-21-17 href=#__codelineno-21-17></a><span class=w>  </span>Normal<span class=w>  </span>Requesting<span class=w>   </span>33s<span class=w>   </span>cert-manager<span class=w>  </span>Requesting<span class=w> </span>certificate<span class=w> </span>from<span class=w> </span>Venafi<span class=w> </span>server...
<a id=__codelineno-21-18 name=__codelineno-21-18 href=#__codelineno-21-18></a><span class=w>  </span>Normal<span class=w>  </span>Retrieve<span class=w>     </span>15s<span class=w>   </span>cert-manager<span class=w>  </span>Retrieved<span class=w> </span>certificate<span class=w> </span>from<span class=w> </span>Venafi<span class=w> </span>server
<a id=__codelineno-21-19 name=__codelineno-21-19 href=#__codelineno-21-19></a><span class=w>  </span>Normal<span class=w>  </span>CertIssued<span class=w>   </span>15s<span class=w>   </span>cert-manager<span class=w>  </span>Certificate<span class=w> </span>issued<span class=w> </span>successfully
</code></pre></div> <p>Once the Certificate has been issued, you should see events similar to above.</p> <p>You should then be able to see the certificate has been successfully stored in the Secret resource:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>$<span class=w> </span>kubectl<span class=w> </span>get<span class=w> </span>secret<span class=w> </span>-n<span class=w> </span>demo<span class=w> </span>example-com-tls
<a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>NAME<span class=w>              </span>TYPE<span class=w>                </span>DATA<span class=w>   </span>AGE
<a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a>example-com-tls<span class=w>   </span>kubernetes.io/tls<span class=w>   </span><span class=m>3</span><span class=w>      </span>2m47s
<a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a>
<a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a>$<span class=w> </span>kubectl<span class=w> </span>get<span class=w> </span>secret<span class=w> </span>example-com-tls<span class=w> </span>-o<span class=w> </span><span class=s1>&#39;go-template={{index .data &quot;tls.crt&quot;}}&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span><span class=se>\</span>
<a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=w>   </span>base64<span class=w> </span>--decode<span class=w> </span><span class=p>|</span><span class=w> </span><span class=se>\</span>
<a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=w>   </span>openssl<span class=w> </span>x509<span class=w> </span>-noout<span class=w> </span>-text
<a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a>Certificate:
<a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a><span class=w>    </span>Data:
<a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a><span class=w>        </span>Version:<span class=w> </span><span class=m>3</span><span class=w> </span><span class=o>(</span>0x2<span class=o>)</span>
<a id=__codelineno-22-11 name=__codelineno-22-11 href=#__codelineno-22-11></a><span class=w>        </span>Serial<span class=w> </span>Number:
<a id=__codelineno-22-12 name=__codelineno-22-12 href=#__codelineno-22-12></a><span class=w>            </span>0d:ce:bf:89:04:d4:41:83:f4:4c:32:66:64:fb:60:14
<a id=__codelineno-22-13 name=__codelineno-22-13 href=#__codelineno-22-13></a><span class=w>    </span>Signature<span class=w> </span>Algorithm:<span class=w> </span>sha256WithRSAEncryption
<a id=__codelineno-22-14 name=__codelineno-22-14 href=#__codelineno-22-14></a><span class=w>        </span>Issuer:<span class=w> </span><span class=nv>C</span><span class=o>=</span>US,<span class=w> </span><span class=nv>O</span><span class=o>=</span>DigiCert<span class=w> </span>Inc,<span class=w> </span><span class=nv>CN</span><span class=o>=</span>DigiCert<span class=w> </span>Test<span class=w> </span>SHA2<span class=w> </span>Intermediate<span class=w> </span>CA-1
<a id=__codelineno-22-15 name=__codelineno-22-15 href=#__codelineno-22-15></a><span class=w>        </span>Validity
<a id=__codelineno-22-16 name=__codelineno-22-16 href=#__codelineno-22-16></a><span class=w>            </span>Not<span class=w> </span>Before:<span class=w> </span>Jul<span class=w> </span><span class=m>17</span><span class=w> </span><span class=m>00</span>:00:00<span class=w> </span><span class=m>2019</span><span class=w> </span>GMT
<a id=__codelineno-22-17 name=__codelineno-22-17 href=#__codelineno-22-17></a><span class=w>            </span>Not<span class=w> </span>After<span class=w> </span>:<span class=w> </span>Oct<span class=w> </span><span class=m>15</span><span class=w> </span><span class=m>12</span>:00:00<span class=w> </span><span class=m>2019</span><span class=w> </span>GMT
<a id=__codelineno-22-18 name=__codelineno-22-18 href=#__codelineno-22-18></a><span class=w>        </span>Subject:<span class=w> </span><span class=nv>C</span><span class=o>=</span>US,<span class=w> </span><span class=nv>ST</span><span class=o>=</span>California,<span class=w> </span><span class=nv>L</span><span class=o>=</span>Palo<span class=w> </span>Alto,<span class=w> </span><span class=nv>O</span><span class=o>=</span>Venafi<span class=w> </span>Cloud,<span class=w> </span><span class=nv>OU</span><span class=o>=</span>SerialNumber,<span class=w> </span><span class=nv>CN</span><span class=o>=</span>example.com
<a id=__codelineno-22-19 name=__codelineno-22-19 href=#__codelineno-22-19></a><span class=w>        </span>Subject<span class=w> </span>Public<span class=w> </span>Key<span class=w> </span>Info:
<a id=__codelineno-22-20 name=__codelineno-22-20 href=#__codelineno-22-20></a><span class=w>            </span>Public<span class=w> </span>Key<span class=w> </span>Algorithm:<span class=w> </span>rsaEncryption
<a id=__codelineno-22-21 name=__codelineno-22-21 href=#__codelineno-22-21></a><span class=w>                </span>Public-Key:<span class=w> </span><span class=o>(</span><span class=m>2048</span><span class=w> </span>bit<span class=o>)</span>
<a id=__codelineno-22-22 name=__codelineno-22-22 href=#__codelineno-22-22></a><span class=w>                </span>Modulus:
<a id=__codelineno-22-23 name=__codelineno-22-23 href=#__codelineno-22-23></a><span class=w>                    </span><span class=m>00</span>:ad:2e:66:02:20:c9:b1:6a:00:63:70:4e:22:3c:
<a id=__codelineno-22-24 name=__codelineno-22-24 href=#__codelineno-22-24></a><span class=w>                    </span><span class=m>45</span>:63:6e:e7:fd:4c:94:7d:75:50:22:a2:01:72:99:
<a id=__codelineno-22-25 name=__codelineno-22-25 href=#__codelineno-22-25></a><span class=w>                    </span>9c:23:04:90:51:85:4d:47:32:e4:8b:ee:b1:ea:09:
<a id=__codelineno-22-26 name=__codelineno-22-26 href=#__codelineno-22-26></a><span class=w>                    </span>1a:de:97:5d:31:05:a2:73:73:4f:06:a3:b2:59:ee:
<a id=__codelineno-22-27 name=__codelineno-22-27 href=#__codelineno-22-27></a><span class=w>                    </span>bc:30:f7:26:85:3d:b3:56:e4:c2:97:34:b6:ac:6d:
<a id=__codelineno-22-28 name=__codelineno-22-28 href=#__codelineno-22-28></a><span class=w>                    </span><span class=m>65</span>:7e:a2:4e:b4:ce:f2:0a:0a:4c:d7:32:d7:5a:18:
<a id=__codelineno-22-29 name=__codelineno-22-29 href=#__codelineno-22-29></a><span class=w>                    </span>e8:69:c6:34:28:26:36:ef:c5:bc:ae:ba:ca:d2:46:
<a id=__codelineno-22-30 name=__codelineno-22-30 href=#__codelineno-22-30></a><span class=w>                    </span>3f:d4:61:39:66:8f:19:cc:d6:d6:10:77:af:51:93:
<a id=__codelineno-22-31 name=__codelineno-22-31 href=#__codelineno-22-31></a><span class=w>                    </span>1b:4d:f8:d1:10:19:ab:ac:b3:7b:0b:98:58:29:e6:
<a id=__codelineno-22-32 name=__codelineno-22-32 href=#__codelineno-22-32></a><span class=w>                    </span>a9:ac:9f:7a:dc:63:0d:51:f5:bd:9f:f3:03:2e:b3:
<a id=__codelineno-22-33 name=__codelineno-22-33 href=#__codelineno-22-33></a><span class=w>                    </span>2d:2f:00:87:f4:e1:cd:5a:32:c6:d8:fb:49:c4:e7:
<a id=__codelineno-22-34 name=__codelineno-22-34 href=#__codelineno-22-34></a><span class=w>                    </span>da:3f:0f:8f:bb:66:94:28:5d:99:fe:7c:f0:17:1b:
<a id=__codelineno-22-35 name=__codelineno-22-35 href=#__codelineno-22-35></a><span class=w>                    </span>fd:3e:ed:dd:36:bf:8e:62:60:0c:85:7f:76:74:4b:
<a id=__codelineno-22-36 name=__codelineno-22-36 href=#__codelineno-22-36></a><span class=w>                    </span><span class=m>37</span>:d9:c2:e8:74:49:04:bf:f1:83:81:cc:4f:9b:f3:
<a id=__codelineno-22-37 name=__codelineno-22-37 href=#__codelineno-22-37></a><span class=w>                    </span><span class=m>40</span>:97:d4:dc:b6:d3:2d:dc:73:18:93:48:a5:8f:6c:
<a id=__codelineno-22-38 name=__codelineno-22-38 href=#__codelineno-22-38></a><span class=w>                    </span><span class=m>57</span>:7f:ec:62:c0:bc:c2:b0:e9:0a:51:2d:c4:b6:87:
<a id=__codelineno-22-39 name=__codelineno-22-39 href=#__codelineno-22-39></a><span class=w>                    </span><span class=m>68</span>:96:87:f8:9a:86:3c:6a:f1:01:ca:57:c4:07:e7:
<a id=__codelineno-22-40 name=__codelineno-22-40 href=#__codelineno-22-40></a><span class=w>                    </span>b0:51
<a id=__codelineno-22-41 name=__codelineno-22-41 href=#__codelineno-22-41></a><span class=w>                </span>Exponent:<span class=w> </span><span class=m>65537</span><span class=w> </span><span class=o>(</span>0x10001<span class=o>)</span>
<a id=__codelineno-22-42 name=__codelineno-22-42 href=#__codelineno-22-42></a><span class=w>        </span>X509v3<span class=w> </span>extensions:
<a id=__codelineno-22-43 name=__codelineno-22-43 href=#__codelineno-22-43></a><span class=w>            </span>X509v3<span class=w> </span>Authority<span class=w> </span>Key<span class=w> </span>Identifier:
<a id=__codelineno-22-44 name=__codelineno-22-44 href=#__codelineno-22-44></a><span class=w>                </span>keyid:D6:4D:F9:39:60:6C:73:C3:22:F5:AD:30:0C:2F:A0:D5:CA:75:4A:2A
<a id=__codelineno-22-45 name=__codelineno-22-45 href=#__codelineno-22-45></a>
<a id=__codelineno-22-46 name=__codelineno-22-46 href=#__codelineno-22-46></a><span class=w>            </span>X509v3<span class=w> </span>Subject<span class=w> </span>Key<span class=w> </span>Identifier:
<a id=__codelineno-22-47 name=__codelineno-22-47 href=#__codelineno-22-47></a><span class=w>                </span>A3:B3:47:2C:41:5E:9C:B2:27:97:57:14:A4:2E:BA:8C:93:E7:01:65
<a id=__codelineno-22-48 name=__codelineno-22-48 href=#__codelineno-22-48></a><span class=w>            </span>X509v3<span class=w> </span>Subject<span class=w> </span>Alternative<span class=w> </span>Name:
<a id=__codelineno-22-49 name=__codelineno-22-49 href=#__codelineno-22-49></a><span class=w>                </span>DNS:example.com
<a id=__codelineno-22-50 name=__codelineno-22-50 href=#__codelineno-22-50></a><span class=w>            </span>X509v3<span class=w> </span>Key<span class=w> </span>Usage:<span class=w> </span>critical
<a id=__codelineno-22-51 name=__codelineno-22-51 href=#__codelineno-22-51></a><span class=w>                </span>Digital<span class=w> </span>Signature,<span class=w> </span>Key<span class=w> </span>Encipherment
<a id=__codelineno-22-52 name=__codelineno-22-52 href=#__codelineno-22-52></a><span class=w>            </span>X509v3<span class=w> </span>Extended<span class=w> </span>Key<span class=w> </span>Usage:
<a id=__codelineno-22-53 name=__codelineno-22-53 href=#__codelineno-22-53></a><span class=w>                </span>TLS<span class=w> </span>Web<span class=w> </span>Server<span class=w> </span>Authentication,<span class=w> </span>TLS<span class=w> </span>Web<span class=w> </span>Client<span class=w> </span>Authentication
<a id=__codelineno-22-54 name=__codelineno-22-54 href=#__codelineno-22-54></a><span class=w>            </span>X509v3<span class=w> </span>CRL<span class=w> </span>Distribution<span class=w> </span>Points:
<a id=__codelineno-22-55 name=__codelineno-22-55 href=#__codelineno-22-55></a>
<a id=__codelineno-22-56 name=__codelineno-22-56 href=#__codelineno-22-56></a><span class=w>                </span>Full<span class=w> </span>Name:
<a id=__codelineno-22-57 name=__codelineno-22-57 href=#__codelineno-22-57></a><span class=w>                  </span>URI:http://crl3.digicert.com/DigiCertTestSHA2IntermediateCA1.crl
<a id=__codelineno-22-58 name=__codelineno-22-58 href=#__codelineno-22-58></a>
<a id=__codelineno-22-59 name=__codelineno-22-59 href=#__codelineno-22-59></a><span class=w>                </span>Full<span class=w> </span>Name:
<a id=__codelineno-22-60 name=__codelineno-22-60 href=#__codelineno-22-60></a><span class=w>                  </span>URI:http://crl4.digicert.com/DigiCertTestSHA2IntermediateCA1.crl
<a id=__codelineno-22-61 name=__codelineno-22-61 href=#__codelineno-22-61></a>
<a id=__codelineno-22-62 name=__codelineno-22-62 href=#__codelineno-22-62></a><span class=w>            </span>X509v3<span class=w> </span>Certificate<span class=w> </span>Policies:
<a id=__codelineno-22-63 name=__codelineno-22-63 href=#__codelineno-22-63></a><span class=w>                </span>Policy:<span class=w> </span><span class=m>2</span>.16.840.1.114412.1.1
<a id=__codelineno-22-64 name=__codelineno-22-64 href=#__codelineno-22-64></a><span class=w>                  </span>CPS:<span class=w> </span>https://www.digicert.com/CPS
<a id=__codelineno-22-65 name=__codelineno-22-65 href=#__codelineno-22-65></a>
<a id=__codelineno-22-66 name=__codelineno-22-66 href=#__codelineno-22-66></a><span class=w>            </span>Authority<span class=w> </span>Information<span class=w> </span>Access:
<a id=__codelineno-22-67 name=__codelineno-22-67 href=#__codelineno-22-67></a><span class=w>                </span>OCSP<span class=w> </span>-<span class=w> </span>URI:http://ocsp.digicert.com
<a id=__codelineno-22-68 name=__codelineno-22-68 href=#__codelineno-22-68></a><span class=w>                </span>CA<span class=w> </span>Issuers<span class=w> </span>-<span class=w> </span>URI:http://cacerts.test.digicert.com/DigiCertTestSHA2IntermediateCA1.crt
<a id=__codelineno-22-69 name=__codelineno-22-69 href=#__codelineno-22-69></a>
<a id=__codelineno-22-70 name=__codelineno-22-70 href=#__codelineno-22-70></a><span class=w>            </span>X509v3<span class=w> </span>Basic<span class=w> </span>Constraints:<span class=w> </span>critical
<a id=__codelineno-22-71 name=__codelineno-22-71 href=#__codelineno-22-71></a><span class=w>                </span>CA:FALSE
<a id=__codelineno-22-72 name=__codelineno-22-72 href=#__codelineno-22-72></a><span class=w>    </span>Signature<span class=w> </span>Algorithm:<span class=w> </span>sha256WithRSAEncryption
<a id=__codelineno-22-73 name=__codelineno-22-73 href=#__codelineno-22-73></a><span class=w>         </span>ae:d4:9c:8a:66:19:9e:7d:12:b7:05:c2:b6:33:b3:9c:a5:40:
<a id=__codelineno-22-74 name=__codelineno-22-74 href=#__codelineno-22-74></a><span class=w>         </span><span class=m>47</span>:ab:34:8d:1b:0f:51:96:de:e9:46:5a:e4:16:10:43:56:bf:
<a id=__codelineno-22-75 name=__codelineno-22-75 href=#__codelineno-22-75></a><span class=w>         </span>fa:f8:64:f4:cb:53:39:5b:45:ca:7f:15:d9:59:25:21:23:c4:
<a id=__codelineno-22-76 name=__codelineno-22-76 href=#__codelineno-22-76></a><span class=w>         </span>4d:dc:a7:f7:83:21:d2:3f:a8:0a:26:f4:ef:fa:1b:2b:7d:97:
<a id=__codelineno-22-77 name=__codelineno-22-77 href=#__codelineno-22-77></a><span class=w>         </span>7e:28:f3:ca:cd:b2:c4:92:f3:92:27:7f:e0:f1:ac:d6:db:4c:
<a id=__codelineno-22-78 name=__codelineno-22-78 href=#__codelineno-22-78></a><span class=w>         </span><span class=m>10</span>:8a:f8:6f:09:bb:b3:4f:19:06:aa:bb:74:1c:e0:51:42:f6:
<a id=__codelineno-22-79 name=__codelineno-22-79 href=#__codelineno-22-79></a><span class=w>         </span>8c:7d:77:f7:80:a4:03:ab:a9:ae:ae:2b:89:17:af:2f:eb:f7:
<a id=__codelineno-22-80 name=__codelineno-22-80 href=#__codelineno-22-80></a><span class=w>         </span>3d:61:7c:dd:e1:5d:d2:5a:c5:6a:f6:c8:92:4c:0a:b5:75:d1:
<a id=__codelineno-22-81 name=__codelineno-22-81 href=#__codelineno-22-81></a><span class=w>         </span>dd:39:f2:a7:a2:10:8c:6d:bf:ca:08:ad:b9:a9:df:e3:59:8f:
<a id=__codelineno-22-82 name=__codelineno-22-82 href=#__codelineno-22-82></a><span class=w>         </span><span class=m>64</span>:16:3c:7e:8a:6e:27:fc:49:d7:06:f0:bd:94:15:f2:fd:0f:
<a id=__codelineno-22-83 name=__codelineno-22-83 href=#__codelineno-22-83></a><span class=w>         </span><span class=m>94</span>:8a:b8:73:67:73:53:22:df:9d:36:e9:34:f9:2a:68:00:59:
<a id=__codelineno-22-84 name=__codelineno-22-84 href=#__codelineno-22-84></a><span class=w>         </span><span class=m>78</span>:6d:2d:8f:a0:0f:13:af:bd:b3:aa:8c:37:c4:22:cf:23:fb:
<a id=__codelineno-22-85 name=__codelineno-22-85 href=#__codelineno-22-85></a><span class=w>         </span><span class=m>56</span>:bc:4e:55:ae:3a:0a:e6:3e:b1:1a:22:71:7b:08:b8:00:41:
<a id=__codelineno-22-86 name=__codelineno-22-86 href=#__codelineno-22-86></a><span class=w>         </span><span class=m>14</span>:26:f6:9b:9b:72:3f:eb:dc:dd:1b:db:a8:20:fd:54:75:ae:
<a id=__codelineno-22-87 name=__codelineno-22-87 href=#__codelineno-22-87></a><span class=w>         </span><span class=m>25</span>:7f:80:e6
</code></pre></div> <p>In the next step, we'll configure your application to actually use this new Certificate resource.</p> <h2 id=exposing-and-securing-your-application>Exposing and securing your application<a class=headerlink href=#exposing-and-securing-your-application title="Permanent link">&para;</a></h2> <p>Now that we have issued a Certificate, we can expose our application using a Kubernetes Ingress resource.</p> <p>Create a file named <code>application-ingress.yaml</code> and save the following in it, replacing <code>example.com</code> with your own domain name:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">frontend-ingress</span>
<a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">demo</span>
<a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span>
<a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=w>    </span><span class=nt>kubernetes.io/ingress.class</span><span class=p>:</span><span class=w> </span><span class=s>&quot;nginx&quot;</span>
<a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a><span class=w>  </span><span class=nt>tls</span><span class=p>:</span>
<a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>hosts</span><span class=p>:</span>
<a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span>
<a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a><span class=w>    </span><span class=nt>secretName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">example-com-tls</span>
<a id=__codelineno-23-13 name=__codelineno-23-13 href=#__codelineno-23-13></a><span class=w>  </span><span class=nt>rules</span><span class=p>:</span>
<a id=__codelineno-23-14 name=__codelineno-23-14 href=#__codelineno-23-14></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span>
<a id=__codelineno-23-15 name=__codelineno-23-15 href=#__codelineno-23-15></a><span class=w>    </span><span class=nt>http</span><span class=p>:</span>
<a id=__codelineno-23-16 name=__codelineno-23-16 href=#__codelineno-23-16></a><span class=w>      </span><span class=nt>paths</span><span class=p>:</span>
<a id=__codelineno-23-17 name=__codelineno-23-17 href=#__codelineno-23-17></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id=__codelineno-23-18 name=__codelineno-23-18 href=#__codelineno-23-18></a><span class=w>        </span><span class=nt>pathType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Exact</span>
<a id=__codelineno-23-19 name=__codelineno-23-19 href=#__codelineno-23-19></a><span class=w>        </span><span class=nt>backend</span><span class=p>:</span>
<a id=__codelineno-23-20 name=__codelineno-23-20 href=#__codelineno-23-20></a><span class=w>          </span><span class=nt>service</span><span class=p>:</span>
<a id=__codelineno-23-21 name=__codelineno-23-21 href=#__codelineno-23-21></a><span class=w>            </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kuard</span>
<a id=__codelineno-23-22 name=__codelineno-23-22 href=#__codelineno-23-22></a><span class=w>            </span><span class=nt>port</span><span class=p>:</span>
<a id=__codelineno-23-23 name=__codelineno-23-23 href=#__codelineno-23-23></a><span class=w>              </span><span class=nt>number</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</code></pre></div> <p>You can then apply this resource with:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>$<span class=w> </span>kubectl<span class=w> </span>apply<span class=w> </span>-n<span class=w> </span>demo<span class=w> </span>-f<span class=w> </span>application-ingress.yaml
</code></pre></div> <p>Once this has been created, you should be able to visit your application at the configured URL, here <code>example.com</code>!</p> <p>Navigate to the address in your web browser and you should see the certificate obtained via Venafi being used to secure application traffic.</p> </article> </div> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> 回到页面顶部 </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> © 2022 The cert-manager Authors. © 2022 The Linux Foundation. All rights reserved. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/cert-manager/cert-manager target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://infosec.exchange/@CertManager target=_blank rel="noopener me" title=infosec.exchange class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg> </a> <a href=https://twitter.com/CertManager/ target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["content.code.annotate", "content.tooltips", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script> <script src=../../../assets/javascripts/bundle.b4d07000.min.js></script> </body> </html>